--- panda3d-1.10.0/panda/metalibs/pandagles2/pandagles2.cxx	2019-01-03 16:01:10.000000000 +0100
+++ panda3d-1.10.0.armv7a-androideabi/panda/metalibs/pandagles2/pandagles2.cxx	2019-01-18 09:02:41.748956435 +0100
@@ -9,8 +9,20 @@
 #define OPENGLES_2
 #include "config_gles2gsg.h"
 
-#include "config_egldisplay.h"
-#include "eglGraphicsPipe.h"
+#if __ANDROID__
+    #include "config_androiddisplay.h"
+    #include "androidGraphicsPipe.h"
+
+    #include <android/log.h>
+
+    #define LOG_TAG "pandagles2.cxx"
+    #define LOG_INFO(...) __android_log_print(ANDROID_LOG_INFO, LOG_TAG, __VA_ARGS__)
+    #define LOG_ERROR(...) __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS__)
+
+#else
+    #include "config_egldisplay.h"
+    #include "eglGraphicsPipe.h"
+#endif
 
 /**
  * Initializes the library.  This must be called at least once before any of
@@ -20,8 +32,14 @@
  */
 void
 init_libpandagles2() {
+  LOG_INFO("35: init_libpandagles2");
   init_libgles2gsg();
+
+#if __ANDROID__
+  init_libandroiddisplay();
+#else
   init_libegldisplay();
+#endif
 }
 
 /**
@@ -30,5 +48,10 @@
  */
 int
 get_pipe_type_pandagles2() {
+#if __ANDROID__
+  LOG_INFO("53: get_pipe_type_pandagles2");
+  return AndroidGraphicsPipe::get_class_type().get_index();
+#else
   return eglGraphicsPipe::get_class_type().get_index();
+#endif
 }
