--- panda3d-input-overhaul/panda/metalibs/pandagles2/pandagles2.cxx	2018-02-04 11:37:09.000000000 +0100
+++ panda3d-input-overhaul.api19/panda/metalibs/pandagles2/pandagles2.cxx	2018-03-07 10:53:52.891729025 +0100
@@ -9,8 +9,13 @@
 #define OPENGLES_2
 #include "config_gles2gsg.h"
 
-#include "config_egldisplay.h"
-#include "eglGraphicsPipe.h"
+#if defined(ANDROID)
+    #include "config_androiddisplay.h"
+    #include "androidGraphicsPipe.h"
+#else
+    #include "config_egldisplay.h"
+    #include "eglGraphicsPipe.h"
+#endif
 
 // By including checkPandaVersion.h, we guarantee that runtime attempts to
 // load libpandagles2.so.dll will fail if they inadvertently link with the
@@ -27,7 +32,12 @@
 void
 init_libpandagles2() {
   init_libgles2gsg();
+
+#if defined(ANDROID)
+  init_libandroiddisplay();
+#else
   init_libegldisplay();
+#endif
 }
 
 /**
@@ -36,5 +46,9 @@
  */
 int
 get_pipe_type_pandagles2() {
+#if defined(ANDROID)
+  return AndroidGraphicsPipe::get_class_type().get_index();
+#else
   return eglGraphicsPipe::get_class_type().get_index();
+#endif
 }
