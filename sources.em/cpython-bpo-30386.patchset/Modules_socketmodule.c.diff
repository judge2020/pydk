--- cpython-bpo-30386/Modules/socketmodule.c	2017-12-10 15:07:21.000000000 +0100
+++ cpython-bpo-30386.em/Modules/socketmodule.c	2018-04-08 02:57:33.291433118 +0200
@@ -1207,6 +1207,10 @@
        }
 #endif /* AF_NETLINK */
 
+#if defined(__EMSCRIPTEN__) && defined(AF_VSOCK)
+    #undef AF_VSOCK
+#endif
+
 #if defined(AF_VSOCK)
        case AF_VSOCK:
        {
