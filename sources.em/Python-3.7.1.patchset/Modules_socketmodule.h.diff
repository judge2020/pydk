--- Python-3.7.1/Modules/socketmodule.h	2018-10-20 08:04:19.000000000 +0200
+++ Python-3.7.1.em/Modules/socketmodule.h	2018-11-17 07:18:26.290870202 +0100
@@ -203,6 +203,11 @@
 #ifdef HAVE_SOCKADDR_ALG
     struct sockaddr_alg alg;
 #endif
+
+#if defined(__EMSCRIPTEN__) && defined(AF_VSOCK)
+    #undef AF_VSOCK
+#endif
+
 #ifdef AF_VSOCK
     struct sockaddr_vm vm;
 #endif
