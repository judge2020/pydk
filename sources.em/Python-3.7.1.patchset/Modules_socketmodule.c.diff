--- cpython-3.7.1rc1/Modules/socketmodule.c	2018-09-26 08:16:09.000000000 +0200
+++ cpython-3.7.1rc1.em/Modules/socketmodule.c	2018-10-09 03:10:41.594197396 +0200
@@ -1293,6 +1293,10 @@
        }
 #endif /* AF_NETLINK */
 
+#if defined(__EMSCRIPTEN__) && defined(AF_VSOCK)
+    #undef AF_VSOCK
+#endif
+
 #if defined(AF_VSOCK)
        case AF_VSOCK:
        {
